// Copyright (c) .NET Foundation. All rights reserved.
// Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.

using System;
using System.IO;
using Microsoft.Extensions.Options;

namespace UpdateVulnerabilityData
{
    public abstract class VulnerabilityDataClient
    {
        private readonly UpdateVulnerabilityDataConfiguration _configuration;

        protected VulnerabilityDataClient(IOptionsSnapshot<UpdateVulnerabilityDataConfiguration> configuration)
        {
            _configuration = configuration?.Value ?? throw new ArgumentNullException(nameof(configuration));
        }
               
        protected static void PrepareLocalDirectories(string importFolder, string exportFolder)
        {
            if (Directory.Exists(importFolder))
            {
                Directory.Delete(importFolder, recursive: true);
            }

            if (Directory.Exists(exportFolder))
            {
                Directory.Delete(exportFolder, recursive: true);
            }

            Directory.CreateDirectory(importFolder);
            Directory.CreateDirectory(exportFolder);
        }
    }
}